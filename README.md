# Бэк-Тест стратегии Moving Average Crossover на данных биржи BitMex #

Проект текстовый. Цель которого загрузить данные с сервера bitmex и провести backatest на торговой стратегии moving average crossover. Данный тест проводился на акцивах XBTUSD (BTC/USD) с данными курса за период с 1-06-2018 по 1-09-2018. При тестах замечено, что сам тест реализованныз на pandas работает на много быстрее, чем тот же тест на Catalyst. Возможно это связанно из-за особенности самого пакета Catalyst. Проект писался на python 3.

Описание основных файлов.
===========================
1. `datareaderbitmex.py` - реализован алгоритм загрузки и кэширование данных с сервера BitMex.
2. `pandas_ma_crossover.py` - реализован алгоритм бэк-теста и визуализации торговой стратегии Moving Average Crossover на базе пакета Pandas.
3. `catalyst_ma_crossover.py` - реализован алгоритм бэк-теста и визуализации торговой стратегии Moving Average Crossover на базе пакета Catalyst.
4. `run_test.sh` - это скрипт Bash для запуска всех тестов. Проверялся на ОС Linux.

Зависимости.
===============================
1. bitmex
2. pandas
3. enigma-catalyst
4. plotly

Данные пакеты можно установит менеджером pip:

    pip3 install bitmex pandas plotly enigma-catalyst

Описание запуска тестов вручную.
==========================================
Если отсудствует к даннов каталоге пакие `cachebitmex`, то требуется сперва её создать. Эта папка будет являться кэшем для данных с сервера BitMex. 

### Запуска бек-теста на Pandas: ###

    python3 pandas_ma_crossover.py

### Запуска бек-теста на Catalyst: ###
Сперва надо записать данные курсов с bitmex в файл формата csv? запустив скрипт:

    python3 datareaderbitmex.py
    
врезультате получим файл bitmex_out.csv.

Для того, что бы бэк-тест прошел, изменим название биржи bitmex на gdax (своеобразный кастыль). Для этого введе команду:

    catalyst ingest-exchange -x gdax --csv bitmex_out.csv -f minute

Catalyst должен "проглатить" эти данные и считать, что эти данные от биржи GDAX. Далее мы и будем использовать gdax вместо bitmex. При этом символика наших акцивов будет далее на xbt_usd, а btc_usd.

Теперь можно и запускать сам тест на Catalyst, но из-за большого периода и высокой частотой данных трейдов - 5 минут данный тест будет длится очень долго. Запуск можно выполнить двумя спсобами:

* запустив сам скрипт:
~~~
    python3 catalyst_ma_crossover.py
~~~
* запустив в командной строкой:
~~~
    catalyst run -f catalyst_ma_crossover.py -x gdax --start 2018-6-1 --end 2018-9-1 -c usd --capital-base 100000
~~~

Итог.
===========================
После успешного прохода тестов должны быть в данном каталоге:
* `cachebitmex` - должны быть за кэшированны данные из сервера bitmex.
* `pandas_portfolio.csv` - трегол бэк-теста на Pandas.
* `catalyst_portfolio.csv` - трегол бэк-теста на Catalyst.
* `pandas_analuze.html` - html файл физуализации построенный на Plotly.
* `catalyst_analuze.html` - html файл физуализации построенный на Plotly.

Визуализация построена на пакете Plotly для обоеих тестов.

Так как данных достаточно много, то сам бэк-тест и прорисовка графиков требует немалых ресурсов, как память так и графики. На моем ноутбуке нехватало, поетому я испытывал трудность с отладкой. Возможно моя ОС требует дополнительных настроек.
